---
import Layout from "../layouts/Layout.astro";
---

<Layout
	title=""
	description=""
	keywords=""
	canonicalURL=""
	robots="index, follow"
>
    <!-- Loading/intro screen -->
    <div id="intro-screen" class="min-h-screen w-screen flex flex-col items-center justify-center bg-white pt-20">
      <img src="/trollface.png" class="w-80 mb-16" alt="troll" />
      <text class="title text-black text-5xl text-center">Troll-OS</text>
      <text class="subtitle text-black text-5xl text-center">Alpha Release 0.01</text>

      <div class="loading-spinner text-black text-5xl mb-8" id="loadingSpinner">
        <span class="spinner-char"></span>
      </div>

      <div class="flex flex-col flex-1 w-full items-center justify-end pb-8">
        <text class="text-black text-3xl text-center">Trollright (c) Troll Company, 1995.</text>
        <text class="text-black text-3xl text-center">All Rights Reserved. Troll-OS is a registered trademark of Troll Company.</text>
      </div>
    </div>

    <!-- Sound modal -->
    <div id="sound-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white border-4 border-black p-8 max-w-md mx-4">
        <div class="text-center">
          <img src="/trollface.png" alt="Trollface" class="w-16 h-16 mx-auto mb-4">
          <h2 class="text-black text-xl font-bold mb-4">TrollOS Audio Settings</h2>
          <p class="text-black mb-6">Do you want to activate sound for a better experience?</p>
          <div class="flex gap-4 justify-center">
            <button id="sound-yes" class="bg-white border-2 border-black px-6 py-2 text-black font-bold hover:bg-gray-100 transition-colors">
              Yes
            </button>
            <button id="sound-no" class="bg-white border-2 border-black px-6 py-2 text-black font-bold hover:bg-gray-100 transition-colors">
                No
              </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Main screen - Windows XP style desktop -->
    <div id="main-screen" class="hidden min-h-screen w-screen bg-white relative overflow-hidden">
      <!-- Background Trollface -->
      <div class="absolute inset-0 flex items-center justify-center pointer-events-none z-0">
        <img src="/trollface.png" alt="Trollface" class="w-40 h-40 opacity-20">
      </div>
      <!-- Desktop Icons -->
       <div class="absolute top-4 left-4 space-y-6 z-10">
         <div class="desktop-icon flex flex-col items-center cursor-pointer hover:bg-gray-100 p-2 rounded" data-app="mycomputer">
           <img src="/folders/files.png" class="w-20 h-20 bg-white flex items-center justify-center mb-1"
             
           />
           <span class="text-black text-xs text-center font-semibold">Files</span>
         </div>
         
         <div class="desktop-icon flex flex-col items-center cursor-pointer hover:bg-gray-100 p-2 rounded" data-app="recycle">
           <img src="/folders/trash.png" class="w-20 h-20 bg-white flex items-center justify-center mb-1"
             
           />
           <span class="text-black text-xs text-center font-semibold">Trash</span>
         </div>
         
         <div class="desktop-icon flex flex-col items-center cursor-pointer hover:bg-gray-100 p-2 rounded" data-app="internet">
           <img src="/folders/internet.png" class="w-20 h-20 bg-white flex items-center justify-center mb-1"
             
           />
           <span class="text-black text-xs text-center font-semibold">Internet Explorer</span>
         </div>
         
         <div class="desktop-icon flex flex-col items-center cursor-pointer hover:bg-gray-100 p-2 rounded" data-app="notepad">
           <img src="/folders/notepad.png" class="w-20 h-20 bg-white flex items-center justify-center mb-1"
             
           />
           <span class="text-black text-xs text-center font-semibold">Text Editor</span>
         </div>
       </div>
       
       <!-- Memecoin Folders -->
       <div class="absolute top-4 right-4 space-y-6 z-10">

         <div class="desktop-icon flex flex-col items-center cursor-pointer hover:bg-gray-100 p-2 rounded" data-app="dexscreener">
           <img src="/social/dexscreener-black.png" class="w-12 h-12 bg-white flex items-center justify-center mb-1"/>
           <span class="text-black text-xs text-center font-semibold">DexScreener</span>
         </div>
         
         <div class="desktop-icon flex flex-col items-center cursor-pointer hover:bg-gray-100 p-2 rounded" data-app="twitter">
           <img src="/social/x-black.png" class="w-12 h-12 bg-white flex items-center justify-center mb-1"
             
           />
           <span class="text-black text-xs text-center font-semibold">x.com</span>
         </div>
         
       </div>
      
      <!-- Animated Troll GIF -->
      <div class="absolute bottom-32 left-0 w-full h-16 pointer-events-none z-15">
        <img id="troll-gif" src="/troll.gif" alt="Troll" class="absolute w-32 animate-troll">
      </div>
      
      <!-- Taskbar -->
       <div class="absolute bottom-0 left-0 right-0 h-12 bg-gray-200 border-t-2 border-black flex items-center px-2 z-20">
         <!-- Start Button -->
         <button id="start-button" class="bg-white border-2 border-black px-4 py-1 text-black font-bold hover:bg-gray-100 transition-colors">
           Start
         </button>
         
         <!-- Separator -->
         <div class="w-px h-8 bg-black mx-2"></div>
         
         <!-- Open Applications -->
         <div id="taskbar-apps" class="flex-1 flex gap-1"></div>
         
         <!-- Clock -->
         <div class="bg-white border-2 border-black px-3 py-1">
           <span id="clock" class="text-black text-sm font-mono"></span>
         </div>
       </div>
       
       <!-- Start Menu (hidden by default) -->
       <div id="start-menu" class="hidden absolute bottom-12 left-0 w-64 bg-white border-2 border-black shadow-lg z-30">
         <div class="bg-gray-200 border-b-2 border-black p-2">
           <span class="text-black font-bold">Troll-OS</span>
         </div>
         <div class="p-2 space-y-1">
           <div class="menu-item p-2 hover:bg-gray-100 cursor-pointer text-black border border-transparent hover:border-black" data-app="mydocuments">
             üìÅ My Documents
           </div>
           <div class="menu-item p-2 hover:bg-gray-100 cursor-pointer text-black border border-transparent hover:border-black" data-app="controlpanel">
             ‚öôÔ∏è Control Panel
           </div>
           <div class="menu-item p-2 hover:bg-gray-100 cursor-pointer text-black border border-transparent hover:border-black" data-app="search">
             üîç Search
           </div>
           <div class="menu-item p-2 hover:bg-gray-100 cursor-pointer text-black border border-transparent hover:border-black" data-app="help">
             ‚ùì Help and Support
           </div>
           <hr class="border-black my-1">
           <div class="text-xs text-gray-600 px-2 py-1 font-semibold">Memecoin Tools</div>
           <div class="menu-item p-2 hover:bg-gray-100 cursor-pointer text-black border border-transparent hover:border-black" data-app="dexscreener">
             üìä DexScreener
           </div>
           <div class="menu-item p-2 hover:bg-gray-100 cursor-pointer text-black border border-transparent hover:border-black" data-app="twitter">
             üê¶ X/Twitter
           </div>
           <div class="menu-item p-2 hover:bg-gray-100 cursor-pointer text-black border border-transparent hover:border-black" data-app="telegram">
             ‚úàÔ∏è Telegram
           </div>
           <div class="menu-item p-2 hover:bg-gray-100 cursor-pointer text-black border border-transparent hover:border-black" data-app="contract">
             üìÑ Contract Info
           </div>
           <hr class="border-black my-1">
           <div class="menu-item p-2 hover:bg-gray-100 cursor-pointer text-black border border-transparent hover:border-black" data-app="shutdown">
             üîå Turn Off Computer
           </div>
         </div>
       </div>
        
        <!-- Application Windows -->
        <div id="windows-container" class="absolute inset-0 pointer-events-none">
          <!-- Notepad Window -->
          <div id="notepad-window" class="hidden window absolute bg-white border-2 border-black shadow-lg pointer-events-auto" style="width: 400px; height: 300px; top: 100px; left: 200px;">
            <div class="window-header bg-gray-200 border-b-2 border-black p-2 flex justify-between items-center cursor-move">
              <span class="text-black font-bold">Untitled - Notepad</span>
              <button class="close-btn bg-red-500 text-white px-2 py-1 text-xs hover:bg-red-600">‚úï</button>
            </div>
            <div class="window-content p-2 h-full">
              <textarea class="w-full h-full border border-gray-300 p-2 resize-none" placeholder="Type your text here..."></textarea>
            </div>
          </div>
          
          <!-- My Computer Window -->
          <div id="mycomputer-window" class="hidden window absolute bg-white border-2 border-black shadow-lg pointer-events-auto" style="width: 500px; height: 350px; top: 80px; left: 150px;">
            <div class="window-header bg-gray-200 border-b-2 border-black p-2 flex justify-between items-center cursor-move">
              <span class="text-black font-bold">My Computer</span>
              <button class="close-btn bg-red-500 text-white px-2 py-1 text-xs hover:bg-red-600">‚úï</button>
            </div>
            <div class="window-content p-4">
              <div class="grid grid-cols-2 gap-4">
                <div class="flex items-center p-2 border border-gray-300 hover:bg-gray-100 cursor-pointer">
                  <span class="mr-2">üíæ</span>
                  <span>Local Disk (C:)</span>
                </div>
                <div class="flex items-center p-2 border border-gray-300 hover:bg-gray-100 cursor-pointer">
                  <span class="mr-2">üíø</span>
                  <span>CD Drive (D:)</span>
                </div>
                <div class="flex items-center p-2 border border-gray-300 hover:bg-gray-100 cursor-pointer">
                  <span class="mr-2">üìÅ</span>
                  <span>My Documents</span>
                </div>
                <div class="flex items-center p-2 border border-gray-300 hover:bg-gray-100 cursor-pointer">
                  <span class="mr-2">üñºÔ∏è</span>
                  <span>My Pictures</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Internet Explorer Window -->
          <div id="internet-window" class="hidden window absolute bg-white border-2 border-black shadow-lg pointer-events-auto" style="width: 600px; height: 400px; top: 60px; left: 100px;">
            <div class="window-header bg-gray-200 border-b-2 border-black p-2 flex justify-between items-center cursor-move">
              <span class="text-black font-bold">Internet Explorer</span>
              <button class="close-btn bg-red-500 text-white px-2 py-1 text-xs hover:bg-red-600">‚úï</button>
            </div>
            <div class="window-content">
              <div class="bg-gray-100 border-b border-gray-300 p-2">
                <div class="flex items-center gap-2">
                  <input type="text" class="flex-1 border border-gray-300 px-2 py-1" value="https://www.trollos.com" readonly>
                  <button class="bg-blue-500 text-white px-3 py-1 hover:bg-blue-600">Go</button>
                </div>
              </div>
              <div class="p-8 text-center">
                <h1 class="text-2xl font-bold mb-4">Welcome to Troll-OS Web!</h1>
                <p class="text-gray-600">This is a simple web browser simulation.</p>
                <div class="mt-4">
                  <div class="bg-blue-100 border border-blue-300 p-4 rounded">
                    <h2 class="font-bold">Troll-OS Official Homepage</h2>
                    <p>Experience the power of Troll-OS!</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Recycle Bin Window -->
          <div id="recycle-window" class="hidden window absolute bg-white border-2 border-black shadow-lg pointer-events-auto" style="width: 450px; height: 300px; top: 120px; left: 250px;">
            <div class="window-header bg-gray-200 border-b-2 border-black p-2 flex justify-between items-center cursor-move">
              <span class="text-black font-bold">Recycle Bin</span>
              <button class="close-btn bg-red-500 text-white px-2 py-1 text-xs hover:bg-red-600">‚úï</button>
            </div>
            <div class="window-content p-4">
              <div class="text-center text-gray-500">
                <div class="text-6xl mb-4">üóëÔ∏è</div>
                <p>The Recycle Bin is empty.</p>
                <button class="mt-4 bg-gray-200 border border-gray-300 px-4 py-2 hover:bg-gray-300">Empty Recycle Bin</button>
              </div>
            </div>
          </div>
          
          <!-- DexScreener Window -->
          <div id="dexscreener-window" class="hidden window absolute bg-white border-2 border-black shadow-lg pointer-events-auto" style="width: 500px; height: 400px; top: 100px; left: 300px;">
            <div class="window-header bg-gray-200 border-b-2 border-black p-2 flex justify-between items-center cursor-move">
              <span class="text-black font-bold">üìä DexScreener - TrollOS</span>
              <button class="close-btn bg-red-500 text-white px-2 py-1 text-xs hover:bg-red-600">‚úï</button>
            </div>
            <div class="window-content p-4">
              <div class="mb-4">
                <div class="bg-gray-100 p-3 border border-gray-300 rounded">
                  <h3 class="font-bold text-lg mb-2">TrollOS Token (TROLL)</h3>
                  <div class="grid grid-cols-2 gap-4 text-sm">
                    <div>
                      <span class="font-semibold">Price:</span> $0.00001337
                    </div>
                    <div>
                      <span class="font-semibold">Market Cap:</span> $1,337,000
                    </div>
                    <div>
                      <span class="font-semibold">24h Volume:</span> $420,690
                    </div>
                    <div>
                      <span class="font-semibold">Holders:</span> 6,969
                    </div>
                  </div>
                </div>
              </div>
              <div class="text-center">
                <div class="bg-green-100 p-4 border border-green-300 rounded">
                  <p class="text-green-800 font-semibold">üìà Chart Analysis</p>
                  <p class="text-sm text-gray-600 mt-2">To the moon! üöÄ</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Twitter Window -->
          <div id="twitter-window" class="hidden window absolute bg-white border-2 border-black shadow-lg pointer-events-auto" style="width: 450px; height: 350px; top: 120px; left: 350px;">
            <div class="window-header bg-gray-200 border-b-2 border-black p-2 flex justify-between items-center cursor-move">
              <span class="text-black font-bold">üê¶ X/Twitter - @TrollOS</span>
              <button class="close-btn bg-red-500 text-white px-2 py-1 text-xs hover:bg-red-600">‚úï</button>
            </div>
            <div class="window-content p-4">
              <div class="space-y-4">
                <div class="bg-blue-50 p-3 border border-blue-200 rounded">
                  <div class="flex items-center mb-2">
                    <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs mr-2">T</div>
                    <span class="font-bold">@TrollOS</span>
                    <span class="text-gray-500 text-sm ml-2">‚Ä¢ 2h</span>
                  </div>
                  <p class="text-sm">üéâ Welcome to TrollOS Alpha! The most based operating system in crypto! #TrollOS #Memecoin</p>
                </div>
                <div class="bg-blue-50 p-3 border border-blue-200 rounded">
                  <div class="flex items-center mb-2">
                    <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs mr-2">T</div>
                    <span class="font-bold">@TrollOS</span>
                    <span class="text-gray-500 text-sm ml-2">‚Ä¢ 4h</span>
                  </div>
                  <p class="text-sm">GM frens! üåÖ Ready to troll the markets today? üòà</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Telegram Window -->
          <div id="telegram-window" class="hidden window absolute bg-white border-2 border-black shadow-lg pointer-events-auto" style="width: 400px; height: 350px; top: 140px; left: 400px;">
            <div class="window-header bg-gray-200 border-b-2 border-black p-2 flex justify-between items-center cursor-move">
              <span class="text-black font-bold">‚úàÔ∏è Telegram - TrollOS Community</span>
              <button class="close-btn bg-red-500 text-white px-2 py-1 text-xs hover:bg-red-600">‚úï</button>
            </div>
            <div class="window-content p-4">
              <div class="space-y-3">
                <div class="bg-blue-100 p-2 rounded text-sm">
                  <span class="font-semibold text-blue-800">Admin:</span> Welcome to TrollOS official chat! üé≠
                </div>
                <div class="bg-gray-100 p-2 rounded text-sm">
                  <span class="font-semibold">CryptoTroll:</span> Wen moon? üöÄ
                </div>
                <div class="bg-gray-100 p-2 rounded text-sm">
                  <span class="font-semibold">DiamondHands:</span> HODL strong! üíéüôå
                </div>
                <div class="bg-gray-100 p-2 rounded text-sm">
                  <span class="font-semibold">MemeKing:</span> This is the way! üòé
                </div>
              </div>
              <div class="mt-4 pt-4 border-t border-gray-300">
                <div class="flex">
                  <input type="text" placeholder="Type a message..." class="flex-1 border border-gray-300 px-2 py-1 text-sm rounded-l">
                  <button class="bg-blue-500 text-white px-3 py-1 text-sm rounded-r">Send</button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Contract Info Window -->
          <div id="contract-window" class="hidden window absolute bg-white border-2 border-black shadow-lg pointer-events-auto" style="width: 450px; height: 300px; top: 160px; left: 450px;">
            <div class="window-header bg-gray-200 border-b-2 border-black p-2 flex justify-between items-center cursor-move">
              <span class="text-black font-bold">üìÑ Contract Information</span>
              <button class="close-btn bg-red-500 text-white px-2 py-1 text-xs hover:bg-red-600">‚úï</button>
            </div>
            <div class="window-content p-4">
              <div class="space-y-4">
                <div>
                  <h3 class="font-bold mb-2">TrollOS Token Contract</h3>
                  <div class="bg-gray-100 p-3 border border-gray-300 rounded">
                    <p class="text-xs font-mono break-all">0x1234567890abcdef1234567890abcdef12345678</p>
                    <button class="mt-2 bg-blue-500 text-white px-3 py-1 text-xs rounded" onclick="navigator.clipboard.writeText('0x1234567890abcdef1234567890abcdef12345678')">Copy Address</button>
                  </div>
                </div>
                <div>
                  <h4 class="font-semibold mb-2">Token Details:</h4>
                  <ul class="text-sm space-y-1">
                    <li><span class="font-semibold">Name:</span> TrollOS</li>
                    <li><span class="font-semibold">Symbol:</span> TROLL</li>
                    <li><span class="font-semibold">Decimals:</span> 18</li>
                    <li><span class="font-semibold">Total Supply:</span> 1,000,000,000 TROLL</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
     </div>

     <script>
       document.addEventListener('DOMContentLoaded', () => {
         const introScreen = document.getElementById('intro-screen');
         const mainScreen = document.getElementById('main-screen');
         const startButton = document.getElementById('start-button');
         const startMenu = document.getElementById('start-menu');
         const clock = document.getElementById('clock');
         const taskbarApps = document.getElementById('taskbar-apps');
         
         let openWindows = new Set();
         let zIndexCounter = 1000;

         // Clock function
         function updateClock() {
           const now = new Date();
           const timeString = now.toLocaleTimeString('en-US', {
             hour: '2-digit',
             minute: '2-digit',
             hour12: true
           });
           if (clock) {
             clock.textContent = timeString;
           }
         }

         // Window management
         function openWindow(windowId) {
           const window = document.getElementById(windowId);
           const appName = windowId.replace('-window', '');
           
           if (window && !openWindows.has(appName)) {
              window.classList.remove('hidden');
              window.style.zIndex = (++zIndexCounter).toString();
              openWindows.add(appName);
              addToTaskbar(appName);
              makeWindowDraggable(window);
              
              // Add close button functionality
              const closeBtn = window.querySelector('.close-btn') as HTMLButtonElement;
              if (closeBtn) {
                closeBtn.onclick = () => closeWindow(appName);
              }
            }
         }

         function closeWindow(appName) {
           const windowId = appName + '-window';
           const window = document.getElementById(windowId);
           
           if (window) {
             window.classList.add('hidden');
             openWindows.delete(appName);
             removeFromTaskbar(appName);
           }
         }

         function addToTaskbar(appName) {
           const taskbarButton = document.createElement('button');
           taskbarButton.className = 'bg-white border border-black px-3 py-1 text-black text-sm hover:bg-gray-100';
           taskbarButton.textContent = getAppDisplayName(appName);
           taskbarButton.id = 'taskbar-' + appName;
           taskbarButton.onclick = () => focusWindow(appName);
           taskbarApps.appendChild(taskbarButton);
         }

         function removeFromTaskbar(appName) {
           const taskbarButton = document.getElementById('taskbar-' + appName);
           if (taskbarButton) {
             taskbarButton.remove();
           }
         }

         function focusWindow(appName) {
            const windowId = appName + '-window';
            const window = document.getElementById(windowId);
            if (window) {
              window.style.zIndex = (++zIndexCounter).toString();
            }
          }

         function getAppDisplayName(appName) {
           const names = {
             'notepad': 'Notepad',
             'mycomputer': 'My Computer',
             'internet': 'Internet Explorer',
             'recycle': 'Recycle Bin',
             'mydocuments': 'My Documents',
             'controlpanel': 'Control Panel',
             'search': 'Search',
             'help': 'Help'
           };
           return names[appName] || appName;
         }

         function makeWindowDraggable(windowElement) {
           const header = windowElement.querySelector('.window-header');
           let isDragging = false;
           let currentX;
           let currentY;
           let initialX;
           let initialY;
           let xOffset = 0;
           let yOffset = 0;

           header.addEventListener('mousedown', dragStart);
           document.addEventListener('mousemove', drag);
           document.addEventListener('mouseup', dragEnd);

           function dragStart(e) {
             initialX = e.clientX - xOffset;
             initialY = e.clientY - yOffset;

             if (e.target === header || header.contains(e.target)) {
                isDragging = true;
                windowElement.style.zIndex = (++zIndexCounter).toString();
              }
           }

           function drag(e) {
             if (isDragging) {
               e.preventDefault();
               currentX = e.clientX - initialX;
               currentY = e.clientY - initialY;
               xOffset = currentX;
               yOffset = currentY;
               windowElement.style.left = currentX + 'px';
               windowElement.style.top = currentY + 'px';
             }
           }

           function dragEnd() {
             isDragging = false;
           }
         }

         // Application launching
         function launchApp(appName) {
           switch(appName) {
             case 'shutdown':
               if (confirm('Are you sure you want to turn off the computer?')) {
                 document.body.style.background = 'black';
                 document.body.innerHTML = '<div style="color: white; text-align: center; padding-top: 50vh; font-family: monospace;">It is now safe to turn off your computer.</div>';
               }
               break;
             case 'mydocuments':
             case 'controlpanel':
             case 'search':
             case 'help':
               alert(`${getAppDisplayName(appName)} - This feature is not implemented yet.`);
               break;
             case 'dexscreener':
               window.open('https://dexscreener.com', '_blank');
               break;
             case 'twitter':
               window.open('https://x.com', '_blank');
               break;
             case 'telegram':
               openWindow('telegram-window');
               break;
             case 'contract':
               openWindow('contract-window');
               break;
             case 'notepad':
               openWindow('notepad-window');
               break;
             case 'internet':
               openWindow('internet-window');
               break;
             case 'mycomputer':
              case 'files':
                openWindow('mycomputer-window');
                break;
             case 'recycle':
               openWindow('recycle-window');
               break;
             default:
               openWindow(appName);
           }
           startMenu.classList.add('hidden');
         }

         // Audio element
         const audio = new Audio('/troll.mp3');
         audio.loop = true;
         
         // After 4 seconds, show sound modal
         setTimeout(() => {
           introScreen.style.transition = 'opacity 0.5s ease-out';
           introScreen.style.opacity = '0';
           
           setTimeout(() => {
             introScreen.style.display = 'none';
             document.getElementById('sound-modal').classList.remove('hidden');
           }, 500);
         }, 4000);
         
         // Sound modal functionality
         const soundModal = document.getElementById('sound-modal');
         const soundYes = document.getElementById('sound-yes');
         const soundNo = document.getElementById('sound-no');
         
         function showDesktop(choice) {
           // Show message based on choice
           const messageDiv = document.createElement('div');
           messageDiv.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
           
           if (choice === 'yes') {
             messageDiv.innerHTML = `
               <div class="bg-white border-4 border-black p-8 max-w-md mx-4 text-center">
                 <img src="/trollface.png" alt="Trollface" class="w-16 h-16 mx-auto mb-4">
                 <h2 class="text-black text-xl font-bold mb-4">Good choice!</h2>
                 <p class="text-black">Enjoy the experience... üòà</p>
               </div>
             `;
           } else {
             messageDiv.innerHTML = `
                <div class="bg-white border-4 border-black p-8 max-w-md mx-4 text-center">
                  <img src="/trollface.png" alt="Trollface" class="w-16 h-16 mx-auto mb-4">
                  <h2 class="text-black text-xl font-bold mb-4">Too bad! üòà</h2>
                  <p class="text-black">We're going to play it anyway... Problem? üéµ</p>
                </div>
              `;
           }
           
           document.body.appendChild(messageDiv);
           
           // Remove message after 2 seconds and show desktop
           setTimeout(() => {
             document.body.removeChild(messageDiv);
             soundModal.classList.add('hidden');
             mainScreen.classList.remove('hidden');
             mainScreen.style.opacity = '0';
             mainScreen.style.transition = 'opacity 0.5s ease-in';
             
             mainScreen.offsetHeight;
             mainScreen.style.opacity = '1';
             
             // Initialize clock
             updateClock();
             setInterval(updateClock, 1000);
           }, 2000);
           
           // Start audio at 7 seconds immediately after click
           audio.currentTime = 7;
           audio.play().catch(e => console.log('Audio autoplay blocked'));
         }
         
         soundYes.addEventListener('click', () => showDesktop('yes'));
         soundNo.addEventListener('click', () => showDesktop('no'));

         // Start menu functionality
         if (startButton && startMenu) {
           startButton.addEventListener('click', (e) => {
             e.stopPropagation();
             startMenu.classList.toggle('hidden');
           });

           document.addEventListener('click', (e) => {
             const target = e.target as HTMLElement;
             if (target && !startMenu.contains(target) && !startButton.contains(target)) {
               startMenu.classList.add('hidden');
             }
           });
         }

         // Desktop icons functionality
         const desktopIcons = document.querySelectorAll('.desktop-icon');
         desktopIcons.forEach(icon => {
           icon.addEventListener('click', () => {
             const appName = icon.getAttribute('data-app');
             if (appName) {
               launchApp(appName);
             }
           });
         });

         // Start menu items functionality
         const menuItems = document.querySelectorAll('.menu-item');
         menuItems.forEach(item => {
           item.addEventListener('click', () => {
             const appName = item.getAttribute('data-app');
             if (appName) {
               launchApp(appName);
             }
           });
         });
       });
     </script>

    <style>
      @keyframes spin {
        0% { content: '|'; }
        25% { content: '/'; }
        50% { content: '-'; }
        75% { content: '\\'; }
        100% { content: '|'; }
      }

      .spinner-char {
        font-family: 'FSEX302', monospace;
        display: inline-block;
        animation: spin 0.5s infinite;
      }

      .spinner-char::before {
        content: '|';
        animation: spinContent 0.5s infinite;
      }

      @keyframes spinContent {
        0% { content: '|'; }
        25% { content: '/'; }
        50% { content: '-'; }
        75% { content: '\\'; }
        100% { content: '|'; }
      }

      .loading-spinner {
        animation: fadeOut 0.5s ease-in-out 3s forwards;
      }

      @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; visibility: hidden; }
      }

      @keyframes trollMove {
        0% { left: -60px; }
        100% { left: calc(100% + 60px); }
      }

      .animate-troll {
        animation: trollMove 8s linear infinite;
      }

      .title {
        font-family: 'FSEX302', monospace;
      }

      .subtitle {
        font-family: 'FSEX302', monospace;
      }
    </style>
</Layout>